From 6c13cf7631324ffcea7096b5a632d39253825caa Mon Sep 17 00:00:00 2001
From: Ricardo Salveti <ricardo@opensourcefoundries.com>
Date: Wed, 9 May 2018 15:21:21 -0300
Subject: [PATCH] Make default config search for /var/sota by default

User can replace the configs via /usr/lib/sota/conf.d or
/usr/sota/conf.d if needed.

Signed-off-by: Ricardo Salveti <ricardo@opensourcefoundries.com>
---
 src/implicit_writer/main.cc      | 2 +-
 src/libaktualizr/config/config.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/implicit_writer/main.cc b/src/implicit_writer/main.cc
index c7e41492..46971971 100644
--- a/src/implicit_writer/main.cc
+++ b/src/implicit_writer/main.cc
@@ -95,7 +95,7 @@ int main(int argc, char *argv[]) {
   sink << "server = \"" << Bootstrap::readServerUrl(credentials_path) << "\"\n\n";
 
   if (!no_root) {
-    std::string cacert_path = "/usr/lib/sota/root.crt";
+    std::string cacert_path = "/var/sota/root.crt";
     sink << "[import]\n";
     sink << "tls_cacert_path = \"" << cacert_path << "\"\n\n";
 
diff --git a/src/libaktualizr/config/config.h b/src/libaktualizr/config/config.h
index c33c8d73..8eaeac53 100644
--- a/src/libaktualizr/config/config.h
+++ b/src/libaktualizr/config/config.h
@@ -138,7 +138,7 @@ class Config : public BaseConfig {
   void checkLegacyVersion();
   void initLegacySecondaries();
 
-  std::vector<boost::filesystem::path> config_dirs_ = {"/usr/lib/sota/conf.d", "/etc/sota/conf.d/"};
+  std::vector<boost::filesystem::path> config_dirs_ = {"/var/sota/sota.toml", "/usr/lib/sota/conf.d", "/etc/sota/conf.d/"};
   bool loglevel_from_cmdline{false};
 };
 
-- 
2.17.1

